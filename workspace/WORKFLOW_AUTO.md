# WORKFLOW_AUTO.md

## 목적
자동화 작업(크론/리마인더/일일 배치/헬스체크)을 일관되게 운영한다.

## 일일 루틴
1. 오전: 문서 배치 점검 (`docs-review-daily-1000`)
2. 낮/저녁: 시스템 상태 확인(헬스체크 알림 반영)
3. 밤: 아기꼬마 성장 로그 기록 (`kkoma-growth-daily-check`)

## 주간 루틴
- 월요일 10:00: 아기꼬마 주간 성장 리포트 (`kkoma-growth-weekly-report`)

## 우선순위
1. 서비스 정상성(연결/인증/치명 에러)
2. 사용자 직접 요청
3. 자동화 배치 진행률
4. 리포트/문서화

## 보안 원칙
- 키/토큰은 채팅에 재노출 금지
- `.env`만 소스 오브 트루스로 사용
- 관리자 키(`admin`)는 일반 API 호출 경로에 사용 금지

## 문서 관리 프로토콜 (Markdown Viewer)
- 모든 .md 파일 검토 및 공유 요청 시:
  1) `md_reader_pro.py`를 실행하여 스타일링된 HTML 생성.
  2) 생성된 HTML을 Google Drive에 업로드하고 '링크가 있는 모든 사용자' 권한 부여.
  3) 사용자에게 직접적인 구글 드라이브 뷰어 링크 제공.
  - 목적: 표 깨짐 방지 및 가독성 극대화.

## 메모리 이슈 대응
- `memory_search` 401 발생 시:
  1) 실제 참조 env 경로 확인
  2) 키 동기화 확인
  3) 프로세스 재시작 후 재검증
- 임시 우회 모드(비차단):
  - `python local_memory_search.py "질의"` 로 로컬 메모리 검색 수행
  - 추론은 Ollama(qwen 계열) 우선 유지
